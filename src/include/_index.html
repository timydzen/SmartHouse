<main>
	@@include('_topbar.html')
	<div class="container">
		<h2>Welcome, Annie!</h2>
		<div class="box info">
			<div class="box__card">
				<div class="box__card--title">Time</div>
				<div id="clock" class="box__card--content"></div>
			</div>
			<div class="box__card">
				<div class="box__card--title">Outdoor Temperature</div>
				<div class="box__card--temp">
					+21.3Â°C
					<svg>
						<use xlink:href="#weather" />
					</svg>
				</div>
			</div>
			<div class="box__card">
				<div class="box__card--title">Members at home:</div>
				<div class="box--wrap">
					<div class="box__card--type">
						<svg class="iconcolor1">
							<use xlink:href="#humanicon" />
						</svg>
						<span class="box__card--title">Annie</span>
					</div>
					<div class="box__card--type">
						<svg class="iconcolor2">
							<use xlink:href="#humanicon" />
						</svg>
						<span class="box__card--title">John</span>
					</div>
					<a href="#" class="box__card--type">
						<svg class="iconcolor4">
							<use xlink:href="#jukovsvg" />
						</svg>
					</a>
				</div>
			</div>
		</div>
		<div class="controls">
			<h3>Controls:</h3>
			<div class="controls__panel">
				<div class="controls__panel--sensor box__card">
					<h4 class="title">Light Intensity:</h4>
					<div class="round-slider--inner">
						<div id="handle1" class="round-slider blue"></div>
					</div>
					<div class="shkala">
						<span>0</span>
						<span>100</span>
					</div>
				</div>
				<div class="controls__panel--sensor box__card">
					<h4 class="title">Air Conditioning:</h4>
					<div class="round-slider--inner">
						<div id="handle2" class="round-slider gray"></div>
					</div>
					<div class="shkala">
						<span>0</span>
						<span>100</span>
					</div>
				</div>
				<div class="controls__panel--sensor box__card">
					<h4 class="title">Temperature:</h4>
					<input
						class="range-bar temp"
						type="range"
						min="19"
						max="32"
						value="22"
						step="1"
					/>
				</div>

				<div class="switch--col">
					<label class="switch">
						<input type="checkbox" hidden />
						<div class="switch--box red">
							<svg>
								<use xlink:href="#wifi" />
							</svg>
							<span>Wi-fi</span>
						</div>
					</label>
					<label class="switch">
						<input type="checkbox" hidden />
						<div class="switch--box green">
							<svg>
								<use xlink:href="#music" />
							</svg>
							<span>Music</span>
						</div>
					</label>
					<label class="switch">
						<input type="checkbox" hidden />
						<div class="switch--box blue">
							<svg>
								<use xlink:href="#intercom" />
							</svg>
							<span>Intercom</span>
						</div>
					</label>
				</div>
			</div>
		</div>
	</div>
</main>
<script
	src="https://code.jquery.com/jquery-3.6.0.min.js"
	integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
	crossorigin="anonymous"
></script>
<script src="https://cdn.jsdelivr.net/npm/round-slider@1.6.1/dist/roundslider.min.js"></script>
<script>
	let optionRoundSliderGray = {
		radius: 90,
		sliderType: "min-range",
		value: 40,
		startAngle: 315,
		circleShape: "pie",
		rangeColor: "#565A72",
		pathColor: "#565A72",
		mouseScrollAction: true,
	};

	let optionRoundSliderBlue = {
		radius: 90,
		sliderType: "min-range",
		value: 40,
		startAngle: 315,
		circleShape: "pie",
		rangeColor: "#65bdc0",
		pathColor: "#65bdc0",
		tooltipColor: "#65bdc0",
		mouseScrollAction: true,
	};

	function changeTooltip(e) {
		var val = e.value,
			speed;

		return val;
	}

	$("#handle1").roundSlider(optionRoundSliderBlue);
	$("#handle2").roundSlider(optionRoundSliderGray);

	function rangeBar(el, color) {
		let inp = document.querySelector(el);
		let showVal = $(el).val();

		$(el).attr("data-val", showVal);

		inp.addEventListener("input", function (e) {
			inpVal = e.target.value;

			let val =
				(inpVal - e.target.getAttribute("min")) /
				(e.target.getAttribute("max") - e.target.getAttribute("min"));

			inp.style.cssText = `background-image: -webkit-gradient(linear, left top, right top, color-stop( ${val} , ${color}), color-stop(${val}, #fff))`;

			showVal = $(el).val();
			$(el).attr("data-val", showVal);
		});
	}

	function loadRangeBars() {
		rangeBar(".temp", "#EE777F");
	}

	window.addEventListener("load", function () {
		loadRangeBars();
	});
</script>
